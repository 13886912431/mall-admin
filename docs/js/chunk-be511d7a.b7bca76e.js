(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be511d7a"],{1276:function(e,t,r){"use strict";var n=r("d784"),a=r("44e7"),i=r("825a"),o=r("1d80"),c=r("4840"),s=r("8aa5"),l=r("50c4"),u=r("14c3"),f=r("9263"),p=r("d039"),m=[].push,d=Math.min,g=4294967295,v=!p((function(){return!RegExp(g,"y")}));n("split",2,(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=String(o(this)),i=void 0===r?g:r>>>0;if(0===i)return[];if(void 0===e)return[n];if(!a(e))return t.call(n,e,i);var c,s,l,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,v=new RegExp(e.source,p+"g");while(c=f.call(v,n)){if(s=v.lastIndex,s>d&&(u.push(n.slice(d,c.index)),c.length>1&&c.index<n.length&&m.apply(u,c.slice(1)),l=c[0].length,d=s,u.length>=i))break;v.lastIndex===c.index&&v.lastIndex++}return d===n.length?!l&&v.test("")||u.push(""):u.push(n.slice(d)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var a=o(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,a,r):n.call(String(a),t,r)},function(e,a){var o=r(n,e,this,a,n!==t);if(o.done)return o.value;var f=i(e),p=String(this),m=c(f,RegExp),h=f.unicode,x=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(v?"y":"g"),y=new m(v?f:"^(?:"+f.source+")",x),b=void 0===a?g:a>>>0;if(0===b)return[];if(0===p.length)return null===u(y,p)?[p]:[];var _=0,w=0,k=[];while(w<p.length){y.lastIndex=v?w:0;var E,R=u(y,v?p:p.slice(w));if(null===R||(E=d(l(y.lastIndex+(v?0:w)),p.length))===_)w=s(p,w,h);else{if(k.push(p.slice(_,w)),k.length===b)return k;for(var $=1;$<=R.length-1;$++)if(k.push(R[$]),k.length===b)return k;w=_=E}}return k.push(p.slice(_)),k}]}),!v)},"14c3":function(e,t,r){var n=r("c6b6"),a=r("9263");e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var i=r.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"456f":function(e,t,r){},6547:function(e,t,r){var n=r("a691"),a=r("1d80"),i=function(e){return function(t,r){var i,o,c=String(a(t)),s=n(r),l=c.length;return s<0||s>=l?e?"":void 0:(i=c.charCodeAt(s),i<55296||i>56319||s+1===l||(o=c.charCodeAt(s+1))<56320||o>57343?e?c.charAt(s):i:e?c.slice(s,s+2):o-56320+(i-55296<<10)+65536)}};e.exports={codeAt:i(!1),charAt:i(!0)}},"8aa5":function(e,t,r){"use strict";var n=r("6547").charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},9263:function(e,t,r){"use strict";var n=r("ad6d"),a=r("9f7f"),i=RegExp.prototype.exec,o=String.prototype.replace,c=i,s=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=s||u||l;f&&(c=function(e){var t,r,a,c,f=this,p=l&&f.sticky,m=n.call(f),d=f.source,g=0,v=e;return p&&(m=m.replace("y",""),-1===m.indexOf("g")&&(m+="g"),v=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(d="(?: "+d+")",v=" "+v,g++),r=new RegExp("^(?:"+d+")",m)),u&&(r=new RegExp("^"+d+"$(?!\\s)",m)),s&&(t=f.lastIndex),a=i.call(p?r:f,v),p?a?(a.input=a.input.slice(g),a[0]=a[0].slice(g),a.index=f.lastIndex,f.lastIndex+=a[0].length):f.lastIndex=0:s&&a&&(f.lastIndex=f.global?a.index+a[0].length:t),u&&a&&a.length>1&&o.call(a[0],r,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a}),e.exports=c},"9f7f":function(e,t,r){"use strict";var n=r("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,r){"use strict";var n=r("23e7"),a=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,r){"use strict";var n=r("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c405:function(e,t,r){"use strict";var n=r("bb36");t["a"]={categoryList:function(e){return n["a"].get("/category/all",e)}}},c4c8:function(e,t,r){"use strict";var n=r("bb36");t["a"]={productList:function(e){return n["a"].get("/products/all",e)},delete:function(e){return n["a"].delete("/products/".concat(e))},add:function(e){return n["a"].post("/products/add",e)}}},d784:function(e,t,r){"use strict";r("ac1f");var n=r("6eeb"),a=r("d039"),i=r("b622"),o=r("9263"),c=r("9112"),s=i("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=i("replace"),p=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),m=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,f){var d=i(e),g=!a((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),v=g&&!a((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[s]=function(){return r},r.flags="",r[d]=/./[d]),r.exec=function(){return t=!0,null},r[d](""),!t}));if(!g||!v||"replace"===e&&(!l||!u||p)||"split"===e&&!m){var h=/./[d],x=r(d,""[e],(function(e,t,r,n,a){return t.exec===o?g&&!a?{done:!0,value:h.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),y=x[0],b=x[1];n(String.prototype,e,y),n(RegExp.prototype,d,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}f&&c(RegExp.prototype[d],"sham",!0)}},d81d:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").map,i=r("1dde"),o=r("ae40"),c=i("map"),s=o("map");n({target:"Array",proto:!0,forced:!c||!s},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},dfdc:function(e,t,r){"use strict";r("456f")},fe50:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product-add"},[r("Steps",{attrs:{steps:e.steps,current:e.current},scopedSlots:e._u([{key:"content",fn:function(){return[0===e.current?r("BasicDetail",{attrs:{form:e.form},on:{next:e.next}}):1===e.current?r("SaleDetail",{attrs:{form:e.form},on:{prev:e.prev,next:e.next}}):e._e()]},proxy:!0}])})],1)},a=[],i=(r("d81d"),r("ac1f"),r("1276"),r("5530")),o=(r("96cf"),r("1da1")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"steps"},[r("div",{staticClass:"steps-area center"},[r("a-steps",{attrs:{current:e.current}},e._l(e.steps,(function(e){return r("a-step",{key:e,attrs:{title:e}})})),1)],1),r("div",{staticClass:"steps-content"},[e._t("content")],2)])},s=[],l={name:"Steps",props:["current","steps"]},u=l,f=(r("dfdc"),r("2877")),p=Object(f["a"])(u,c,s,!1,null,"52f0f55a",null),m=p.exports,d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"basic-detail"},[r("a-form-model",{ref:"form",attrs:{model:e.form,"label-col":{span:5},"wrapper-col":{span:13}}},[r("a-form-model-item",{attrs:{label:"标题",required:"",prop:"title"}},[r("a-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("a-form-model-item",{attrs:{label:"商品描述",prop:"desc"}},[r("a-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("a-form-model-item",{attrs:{label:"商品类名",required:"",prop:"category"}},[r("a-select",{attrs:{allowClear:""},on:{change:e.changeCategory},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.categoryList,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1),r("a-select",{attrs:{allowClear:""},model:{value:e.form.c_items,callback:function(t){e.$set(e.form,"c_items",t)},expression:"form.c_items"}},e._l(e.categoryItems,(function(t){return r("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),r("a-form-model-item",{attrs:{label:"商品标签",required:"",prop:"tags"}},[r("a-select",{attrs:{mode:"tags"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.defaultTags,(function(t){return r("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),r("a-form-model-item",{staticStyle:{"margin-top":"60px"},attrs:{"wrapper-col":{span:14,offset:4}}},[r("a-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v(" 下一步 ")])],1)],1)],1)},g=[],v=(r("4160"),r("159b"),r("c405")),h={name:"BasicDetail",data:function(){return{defaultTags:["包邮，最晚次日送达"],categoryList:[],categoryItems:[],categoryMap:{}}},props:["form"],methods:{next:function(){var e=this;this.$refs.form.validate((function(t){t&&e.$emit("next")}))},changeCategory:function(e){this.form.c_items="",this.categoryItems=this.categoryMap[e]},getCategoryList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v["a"].categoryList();case 2:r=t.sent,e.categoryList=r.data,e.categoryList.forEach((function(t){e.categoryMap[t.id]=t.c_items})),e.form.category&&e.changeCategory(e.form.category);case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.getCategoryList()}},x=h,y=Object(f["a"])(x,d,g,!1,null,null,null),b=y.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sale-detail"},[r("a-form-model",{ref:"form",attrs:{model:e.form,"label-col":{span:5},"wrapper-col":{span:13}}},[r("a-form-model-item",{attrs:{label:"商品售价",required:"",prop:"price"}},[r("a-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n(t))},expression:"form.price"}})],1),r("a-form-model-item",{attrs:{label:"商品折扣价"}},[r("a-input",{model:{value:e.form.price_off,callback:function(t){e.$set(e.form,"price_off",e._n(t))},expression:"form.price_off"}})],1),r("a-form-model-item",{attrs:{label:"商品库存",required:"",prop:"inventory"}},[r("a-input",{model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",e._n(t))},expression:"form.inventory"}})],1),r("a-form-model-item",{attrs:{label:"计量单位",required:"",prop:"unit"}},[r("a-input",{model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),r("a-form-model-item",{attrs:{label:"商品相册"}},[r("a-upload",{attrs:{action:e.action,"list-type":"picture-card","file-list":e.form.images,name:"avatar"},on:{preview:e.handlePreview,change:e.handleChange}},[e.form.images.length<8?r("div",[r("a-icon",{attrs:{type:"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),r("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:function(t){e.previewVisible=!1}}},[r("img",{staticStyle:{width:"100%"},attrs:{src:e.previewImage}})])],1),r("a-form-model-item",{staticStyle:{"text-align":"left"},attrs:{label:"是否上架"}},[r("a-checkbox",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1),r("a-form-model-item",{staticStyle:{"margin-top":"20px"},attrs:{"wrapper-col":{span:14,offset:4}}},[r("a-button",{on:{click:e.prev}},[e._v(" 上一步 ")]),r("a-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v(" 提交 ")])],1)],1)],1)},w=[];r("d3b7");function k(e){return new Promise((function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return r(e)}}))}var E={name:"SaleDetail",data:function(){return{previewVisible:!1,previewImage:"",fileList:[],action:"https://mallapi.duyiedu.com/upload/images?appkey=".concat(this.$store.getters["user/getUser"].appkey)}},props:["form"],methods:{prev:function(){this.$emit("prev")},next:function(){var e=this;this.$refs.form.validate((function(t){t?e.$emit("next",e.form):console.log("验证错误")}))},handlePreview:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.url||e.preview){r.next=4;break}return r.next=3,k(e.originFileObj);case 3:e.preview=r.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return r.stop()}}),r)})))()},handleChange:function(e){var t=e.fileList;this.form.images=t}}},R=E,$=Object(f["a"])(R,_,w,!1,null,null,null),C=$.exports,I=r("c4c8"),S={name:"ProductAdd",data:function(){return{current:0,form:{title:"",desc:"",category:"",c_items:"",tags:[],price:"",price_off:"",inventory:"",unit:"",images:[],status:!0},steps:["填写商品基本信息","填写商品销售信息"]}},components:{Steps:m,BasicDetail:b,SaleDetail:C},methods:{next:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.current!==e.steps.length-1){t.next=7;break}return r=Object(i["a"])(Object(i["a"])({},e.form),{},{c_items:e.form.c_items&&e.form.c_items.split(" "),status:e.form.status?1:0,images:e.form.images.map((function(e){return e.response.data.url}))}),t.next=4,I["a"].add(r);case 4:e.$modal.confirm({title:"添加成功",mask:!0,cancelText:"继续添加",okText:"查看商品列表",icon:"check-circle",onOk:function(t){t(),e.$router.push({name:"ProductList"})},onCancel:function(t){t(),e.current=0;var r={};for(var n in e.form)Array.isArray(e.form[n])?r[n]=[]:"boolean"===typeof e.form[n]?r[n]=!0:"string"===typeof e.form[n]&&(r[n]="");e.form=r}}),t.next=8;break;case 7:e.current+=1;case 8:case"end":return t.stop()}}),t)})))()},prev:function(){this.current-=1}}},A=S,O=Object(f["a"])(A,n,a,!1,null,null,null);t["default"]=O.exports}}]);
//# sourceMappingURL=chunk-be511d7a.b7bca76e.js.map